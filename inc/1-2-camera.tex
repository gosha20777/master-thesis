\subsection{Уникальность цифровых камер}\label{sect-1-2}

Цифровая камера — это устройство, которое захватывает цифровые изображения, используя комбинацию оптики, датчиков и цифровой обработки. В контексте вычислительной фотографии цифровые камеры используют передовые алгоритмы и методы обработки для повышения качества изображения и обработки захваченных изображений.

\addimghere{1-1-2-vingetting}{0.6}{Система линз фотокамеры и виньетирование}{vingetting-camera}

Когда свет попадает в цифровую камеру, он проходит через систему линз (рис. \ref{vingetting-camera}), которая фокусирует свет на матрице датчика изображения. Матрица обычно состоит из миллионов отдельных сенсорных элементов или пикселей, которые чувствительны к свету и регистрируют количество падающего на них света.

Одной из проблем цифровой фотографии является цветовое виньетирование. Виньетирование — это оптическое явление, вызывающее потерю яркости или насыщенности по краям изображения. Это происходит, когда свет, проходящий через систему линз, неравномерно распределяется по плоскости датчика или пленки, что приводит к постепенному снижению яркости или насыщенности цвета по направлению к краям кадра (рис. \ref{vingetting-camera}, \ref{vingetting-camera-2}).

\addimghere{1-1-2-vingetting-2}{0.6}{Пример виньетирования}{vingetting-camera-2}

Другой проблемой является шаблон Байера, который используется в большинстве цифровых камер для захвата информации о цвете. Датчик камеры состоит из двумерной сетки фотодиодов. Фотодиод — это полупроводниковый прибор, преобразующий фотоны (световое излучение) в электрический заряд. Один фотодиод обычно соответствует одному пикселю изображения. Для получения цветного изображения поверх фотодиодов помещаются цветные фильтры. Эти цветовые фильтры примерно соответствуют длинным, средним и коротким колбочкам сетчатки. Типичное расположение этого массива цветовых фильтров (CFA) часто называют шаблоном Байера в честь ученого, предложившего эту конструкцию в Kodak в 1975 г \cite{lib-bayer}. Паттерн Байера работает, позволяя каждому пикселю записывать количество света, прошедшего через соответствующий цветовой фильтр. 

\addimghere{1-1-2-bayer}{0.6}{Многообразие типов шаблона Байера}{bayer}

Существует несколько различных типов шаблона Байера (рис. \ref{bayer}), в основном состоящих из различных комбинаций зеленого (G), красного (R) и синего (B) фильтров: RGGB (красный-зеленый-зеленый-синий), BGGR (синий-зеленый-зеленый-красный), GBRG (зеленый-синий-красный-зеленый) и GRBG (зеленый-красный-синий-красный). Стоит отметить, что конкретный используемый шаблон может варьироваться в зависимости от производителя и модели камеры. Так, например, некоторые производители могут применять другие комбинации фильтров, такие как CYGM (циан-желтый-зеленый-пурпурный), или включать в шаблон пиксели без фильтров. Каждый тип паттерна Байера имеет свои сильные и слабые стороны. Например, шаблон RGGB является наиболее распространенным и обеспечивает хороший баланс точности цветопередачи и разрешения.

Очевидно что все типы шаблона Байера могут привести к цветовым артефактам и снижению цветового разрешения, особенно в областях с мелкими деталями или резкими переходами цветов. Это связано с тем, что соседние пиксели могут не отображать одинаковую информацию о цвете, что приводит к ошибкам в воспроизведении цветов.

Еще одной проблемой является шум, представляющий собой случайное изменение значений пикселей, которое может быть вызвано несколькими факторами, в том числе нагревом, электрическими помехами и собственной чувствительностью датчика. Количество и тип шума могут различаться в зависимости от модели камеры и размера сенсора. Например, камеры с матрицей большего размера, как правило, создают изображения с меньшим шумом, чем камеры с матрицей меньшего размера, потому что они способны захватывать больше света и обеспечивают более высокое отношение сигнал -- шум. Этот аспект особенно важен при мобильной фотографии, так как в портативных устройствах как правило используются сенсоры малого размера.

Кривые спектральной чувствительности также различаются у разных моделей камер, даже у тех, у которых один и тот же тип сенсора (рис. \ref{spectral-curves}). Это связано с тем, что каждый пиксель в датчике имеет свою уникальную спектральную характеристику, на которую влияют такие факторы, как тип используемого цветного фильтра, толщина слоя кремния и угол падения света. Данные различия могут привести к различиям в точности цветопередачи и тональному отклику между разными камерами, даже при использовании одного и того же цветового пространства и настроек калибровки. Например, некоторые камеры могут создавать изображения с более точными телесными тонами, тогда как другие могут создавать изображения с более яркими или насыщенными цветами (рис. \ref{image-diff}).

\addimghere{1-1-2-spectral-curves}{0.8}{Кривые спектральной чувствительности сенсоров мобильных телефонов iPthone 6s, iPhone 8, Huawei P10 Lite}{spectral-curves}

Результирующее изображение RAW, снятое камерой, находится в другом цветовом пространстве и должно быть обработано, чтобы преобразовать его в стандартное цветовое пространство (например sRGB) для отображения или печати. 

Восстановление цветного изображения также тесно связано с такими проблемами, как битые пиксели, которые представляют собой отдельные элементы датчика, которые не регистрируют свет, зашкаленные области, которые представляют собой пиксели с насыщением на определенном уровне, и уровни черного, которые представляют собой минимальный уровень яркости, который может быть фиксируется датчиком.

\addimghere{1-1-2-image-diff}{0.6}{Разница цветпередачи различных сенсоров}{image-diff}


Важно отметить, что все вышеописанные явления уникальны для каждой камеры и могут варьироваться не только зависимости от модели и производителя, но и межу сенсорами одной серии. Это означает, что должны существовать алгоритмы или техники калибровки алгоритмов вычислительной фотографии, свидетельствует о важности таких подходов, а также подчеркивает, что задача восстановления изображения не может быть решена однозначно.